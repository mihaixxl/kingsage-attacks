<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>KA - Atacuri</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; margin: 20px; }
    h1 { text-align: center; color: #333; }
    table { border-collapse: collapse; margin: 20px auto; width: 95%; background: white; }
    th, td { border: 1px solid #ccc; padding: 6px 10px; text-align: center; }
    th { background: #eee; }
    img { height: 20px; vertical-align: middle; }
    .small { font-size: 12px; color: #666; }
  </style>
</head>
<body>
  <h1>üìú Atacuri KingsAge</h1>
  <div id="info" class="small" style="text-align:center; margin-bottom:10px;">
    Se √ÆncarcƒÉ datele...
  </div>
  <table id="attacks">
    <thead>
      <tr>
        <th>Unitate</th>
        <th>Destina»õie</th>
        <th>Origine</th>
        <th>Sosire</th>
        <th>Timp rƒÉmas</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    async function loadData() {
      const url = "https://gist.githubusercontent.com/mihaixxl/0fc6426ec97aafcaa3895a31de3b1b5d/raw/ka_attacks.json?ts=" + Date.now();
      try {
        const res = await fetch(url);
        const json = await res.json();

        document.getElementById("info").innerText = "Ultimul export: " + json.exportatLa;

        const tbody = document.querySelector("#attacks tbody");
        tbody.innerHTML = "";

        json.data.forEach(a => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${a.unitImg ? `<img src="${a.unitImg}">` : ""} ${a.unit || ""}</td>
            <td>${a.destin}</td>
            <td>${a.origine}</td>
            <td>${a.sosire}</td>
            <td>${a.ramas}</td>
          `;
          tbody.appendChild(tr);
        });
      } catch (e) {
        document.getElementById("info").innerText = "‚ùå Eroare la √ÆncƒÉrcare: " + e;
      }
    }

    loadData();
    // Re√ÆncarcƒÉ automat la fiecare 10 secunde
    setInterval(loadData, 10000);
  </script>
</body>
</html>